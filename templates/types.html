{% extends "layout.html" %}
<!-- enter the page title here!-->
{% block title %} Manage Types {% endblock %}
<!--head-->
{%block head %}
<script>
  function populateCanvasI(itypeId, itypeName) {
    // Get the canvas element
    const editICanvas = document.getElementById("EditItypeCanvas");

    // Populate the canvas form fields
    editICanvas.querySelector("#edit-itype-id").value = itypeId;
    editICanvas.querySelector("#edit-itype-name").value = itypeName;
  }
  function populateCanvasP(ptypeId, ptypeName) {
    // Get the canvas element
    const editPCanvas = document.getElementById("EditPtypeCanvas");

    // Populate the canvas form fields
    editPCanvas.querySelector("#edit-ptype-id").value = ptypeId;
    editPCanvas.querySelector("#edit-ptype-name").value = ptypeName;
  }
</script>
{% endblock %}
<!--body-->
{%block main %}
<div class="container mx-auto text-center">
  <div class="row">
    <div class="col">
      <h3 class="my-4">Existing Ingredient Types</h3>
      <!-- List of existing ingredient types -->
      <table class="table table-striped w-auto mx-auto">
        <thead>
          <tr>
            <th>Ingredient</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for itype in itypes %}
          <tr>
            <td>{{ itype.name|safe }}</td>
            <td>
              <form action="{{ url_for('types.itrack') }}" method="post">
                <input type="hidden" name="track" value="{{ itype.id|safe }}" />
                <input
                  type="image"
                  src="/static/icons/info-square.svg"
                  alt="track"
                  name="itype_track"
                  title="Track {{ itype.name|safe }}"
                />
              </form>
            </td>
            <td>
              <img
                src="/static/icons/pencil-square.svg"
                alt="edit"
                name="itype_edit"
                type="button"
                title="Edit {{ itype.name|safe }}"
                data-bs-toggle="offcanvas"
                data-bs-target="#EditItypeCanvas"
                aria-controls="EditItypeCanvas"
                onclick="populateCanvasI(
                '{{ itype.id }}',
                '{{ itype.name|escape_html|safe }}'
              );"
              />
            </td>
            <td>
              <form
                id="del-{{ itype.id }}"
                action="{{ url_for('types.delete_type') }}"
                method="post"
              >
                <input type="hidden" name="itype_delete" value="{{ itype.id }}" />
                <img
                  src="/static/icons/x-square.svg"
                  alt="delete"
                  name="itype_delete"
                  type="submit"
                  title="Delete {{ itype.name|safe }}"
                  onclick="return confirmDelete('del-{{ itype.id }}', '{{ itype.name|escape_html|safe }}');"
                />
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <button
        class="btn btn-success"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#AddItypeCanvas"
        aria-controls="AddItypeCanvas"
      >
        + Add New Ingredient Type
      </button>
    </div>
    <div class="vr px-0"></div>
    <div class="col">
      <h3 class="my-4">Existing Production Types</h3>
      <!-- List of existing production types -->
      <table class="table table-striped w-auto mx-auto">
        <thead>
          <tr>
            <th>Production</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for ptype in ptypes %}
          <tr>
            <td>{{ ptype.name|safe }}</td>
            <td>
              <form action="{{ url_for('types.ptrack') }}" method="post">
                <input type="hidden" name="track" value="{{ ptype.id|safe }}" />
                <input
                  type="image"
                  src="/static/icons/info-square.svg"
                  alt="track"
                  name="ptype_track"
                  title="Track {{ ptype.name|safe }}"
                />
              </form>
            </td>
            <td>
              <img
                src="/static/icons/pencil-square.svg"
                alt="edit"
                name="ptype_edit"
                type="button"
                                title="Edit {{ ptype.name|safe }}"
                data-bs-toggle="offcanvas"
                data-bs-target="#EditPtypeCanvas"
                aria-controls="EditPtypeCanvas"
                onclick="populateCanvasP(
                '{{ ptype.id }}',
                '{{ ptype.name|escape_html|safe }}'
              );"
              />
            </td>
            <td>
              <form
                id="del-p{{ ptype.id }}"
                action="{{ url_for('types.delete_type') }}"
                method="post"
              >
                <input type="hidden" name="ptype_delete" value="{{ ptype.id }}" />
                <img
                  src="/static/icons/x-square.svg"
                  alt="delete"
                  name="ptype_delete"
                  type="submit"
                  title="Delete {{ ptype.name|safe }}"
                  onclick="return confirmDelete('del-p{{ ptype.id }}', '{{ ptype.name|escape_html|safe }}');"
                />
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <button
        class="btn btn-success"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#AddPtypeCanvas"
        aria-controls="AddPtypeCanvas"
      >
        + Add New Production Type
      </button>
    </div>
  </div>
</div>
<!-- offcanvas to add a new ingredient -->
<div
  class="offcanvas offcanvas-start text-end"
  data-bs-scroll="true"
  tabindex="-1"
  id="AddItypeCanvas"
  aria-labelledby="AddItypeCanvasLabel"
>
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="AddItypeCanvasLabel">Add New Ingredient Type</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div class="container mx-auto">
      <form id="itype_form" method="POST" action="{{ url_for('types.types') }}">
        <div class="form-floating">
          <input
            type="text"
            class="form-control"
            id="itype-name"
            name="name"
            autocomplete="off"
            required
            placeholder="Enter the ingredient name"
          />
          <label for="itype-name">Ingredient Name</label>
        </div>

        <button name="itype_form" type="submit" class="btn btn-success">Add Ingredient Type</button>
      </form>
    </div>
  </div>
</div>
<!-- offcanvas for ingredient type editing -->
<div
  class="offcanvas offcanvas-start text-end"
  data-bs-scroll="true"
  tabindex="-1"
  id="EditItypeCanvas"
  aria-labelledby="EditItypeCanvasLabel"
>
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="EditItypeCanvasLabel">Edit Ingredient Type</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div class="container mx-auto">
      <form id="itype_edit" method="POST" action="{{ url_for('types.edit_type') }}">
        <div class="form-floating">
          <input type="hidden" name="id" id="edit-itype-id" />
          <input
            type="text"
            class="form-control"
            id="edit-itype-name"
            name="name"
            autocomplete="off"
            required
            placeholder="Enter the Ingredient type name"
          />
          <label for="edit-itype-name">Ingredient Type Name</label>
        </div>

        <button name="itype_edit" type="submit" class="btn btn-warning">
          Edit Ingredient Type
        </button>
      </form>
    </div>
  </div>
</div>
<!-- offcanvas to add a new production -->
<div
  class="offcanvas offcanvas-end text-start"
  data-bs-scroll="true"
  tabindex="-1"
  id="AddPtypeCanvas"
  aria-labelledby="AddPtypeCanvasLabel"
>
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="AddPtypeCanvasLabel">Add New Production Type</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div class="container mx-auto">
      <form id="ptype_form" method="POST" action="{{ url_for('types.types') }}">
        <div class="form-floating">
          <input
            type="text"
            class="form-control"
            id="ptype-name"
            name="name"
            autocomplete="off"
            required
            placeholder="Enter the production name"
          />
          <label for="ptype-name">Production Name</label>
        </div>

        <button name="ptype_form" type="submit" class="btn btn-success">Add Production Type</button>
      </form>
    </div>
  </div>
</div>
<!-- offcanvas for production type editing -->
<div
  class="offcanvas offcanvas-end text-start"
  data-bs-scroll="true"
  tabindex="-1"
  id="EditPtypeCanvas"
  aria-labelledby="EditPtypeCanvasLabel"
>
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="EditPtypeCanvasLabel">Edit Production Type</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div class="container mx-auto">
      <form id="ptype_edit" method="POST" action="{{ url_for('types.edit_type') }}">
        <div class="form-floating">
          <input type="hidden" name="id" id="edit-ptype-id" />
          <input
            type="text"
            class="form-control"
            id="edit-ptype-name"
            name="name"
            autocomplete="off"
            required
            placeholder="Enter the Ingredient type name"
          />
          <label for="edit-ptype-name">Production Type Name</label>
        </div>

        <button name="ptype_edit" type="submit" class="btn btn-warning">
          Edit Production Type
        </button>
      </form>
    </div>
  </div>
</div>

{% endblock %}
